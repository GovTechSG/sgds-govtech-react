import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { useState, useEffect } from 'react';
import { Paginations } from '../../src/components/index';

<Meta
  title="MDX/Paginations"
  component={Paginations}
  argTypes={{
    dataLength: {
      description:
        'Inserts the length value from a given sets of data objects. Value can be set using useState hook.',
      control: { disable: true },
    },
    currentPage: {
      description:
        'Sets the starting active page upon render. Value can be set using useState hook.',
      control: { disable: true },
    },
    itemsPerPage: {
      description:
        'Sets the amount of data objects to be displayed per page. Value can be set using useState hook.',
      control: { disable: true },
    },
    limit: {
      description:
        'Sets the page limit to be displayed at any given render. e.g 3, 5, 7, 9',
    },
    size: {
      description: 'Sets the size of all page items.',
      table: {
        type: { summary: 'string' },
      },
    },
    directionVariant: {
      description:
        'Sets the page direction button to contain text and/or icon.',
      table: {
        type: { summary: 'string' },
      },
    },
    directionVariant: {
      description:
        'Sets the page direction button to contain text and/or icon.',
      table: {
        type: { summary: 'string' },
      },
    },
    setCurrentPage: {
      description:
        'A prop that is being triggered by clicking a page item which sets page numbering & enable active mode. Value to be inserted using useState hook',
      control: { disable: true },
    },
    ellipsisOn: {
      description:
        'Sets ellipsis to be able to increment/decrement pages based on the pages limit set.',
    },
    bsPrefix: { table: { disable: true } }, // to remove as commonHiddenProps
    as: { table: { disable: true } },
  }}
/>

export const DUMMY_DATA = [
  {
    userId: 1,
    id: 1,
    title:
      'sunt aut facere repellat provident occaecati excepturi optio reprehenderit',
    body: 'quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto',
  },
  {
    userId: 1,
    id: 2,
    title: 'qui est esse',
    body: 'est rerum tempore vitae\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\nqui aperiam non debitis possimus qui neque nisi nulla',
  },
  {
    userId: 1,
    id: 3,
    title: 'ea molestias quasi exercitationem repellat qui ipsa sit aut',
    body: 'et iusto sed quo iure\nvoluptatem occaecati omnis eligendi aut ad\nvoluptatem doloribus vel accusantium quis pariatur\nmolestiae porro eius odio et labore et velit aut',
  },
  {
    userId: 1,
    id: 4,
    title: 'eum et est occaecati',
    body: 'ullam et saepe reiciendis voluptatem adipisci\nsit amet autem assumenda provident rerum culpa\nquis hic commodi nesciunt rem tenetur doloremque ipsam iure\nquis sunt voluptatem rerum illo velit',
  },
  {
    userId: 1,
    id: 5,
    title: 'nesciunt quas odio',
    body: 'repudiandae veniam quaerat sunt sed\nalias aut fugiat sit autem sed est\nvoluptatem omnis possimus esse voluptatibus quis\nest aut tenetur dolor neque',
  }
  // {
  //   userId: 1,
  //   id: 6,
  //   title: 'dolorem eum magni eos aperiam quia',
  //   body: 'ut aspernatur corporis harum nihil quis provident sequi\nmollitia nobis aliquid molestiae\nperspiciatis et ea nemo ab reprehenderit accusantium quas\nvoluptate dolores velit et doloremque molestiae',
  // },
  // {
  //   userId: 1,
  //   id: 7,
  //   title: 'magnam facilis autem',
  //   body: 'dolore placeat quibusdam ea quo vitae\nmagni quis enim qui quis quo nemo aut saepe\nquidem repellat excepturi ut quia\nsunt ut sequi eos ea sed quas',
  // },
  // {
  //   userId: 1,
  //   id: 8,
  //   title: 'dolorem dolore est ipsam',
  //   body: 'dignissimos aperiam dolorem qui eum\nfacilis quibusdam animi sint suscipit qui sint possimus cum\nquaerat magni maiores excepturi\nipsam ut commodi dolor voluptatum modi aut vitae',
  // },
  // {
  //   userId: 1,
  //   id: 9,
  //   title: 'nesciunt iure omnis dolorem tempora et accusantium',
  //   body: 'consectetur animi nesciunt iure dolore\nenim quia ad\nveniam autem ut quam aut nobis\net est aut quod aut provident voluptas autem voluptas',
  // },
  // {
  //   userId: 1,
  //   id: 10,
  //   title: 'optio molestias id quia eum',
  //   body: 'quo et expedita modi cum officia vel magni\ndoloribus qui repudiandae\nvero nisi sit\nquos veniam quod sed accusamus veritatis error',
  // },
];

export const Template2 = (args) => {
  const renderData = (data) => {
    return (
      <>
        {data.map((post, index) => {
          return (
            <tr key={index}>
              <td>{post.id}</td>
              <td key={index}>{post.title}</td>
              <td>{post.body}</td>
            </tr>
          );
        })}
      </>
    );
  };
  const [data, setData] = useState(DUMMY_DATA);
  const [currentPage, setCurrentPage] = useState(1);
  const [itemsPerPage, setItemsPerPage] = useState(1);
  const indexOfLastItem = currentPage * itemsPerPage;
  const indexofFirstItem = indexOfLastItem - itemsPerPage;
  const currentItems = data.slice(indexofFirstItem, indexOfLastItem);
  return (
    <div>
      <Table striped bordered hover style={{ display: 'none' }}>
        <thead>
          <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Body</th>
          </tr>
        </thead>
        <tbody>{renderData(currentItems)}</tbody>
      </Table>
      <Paginations
        {...args}
        dataLength={data.length}
        currentPage={currentPage}
        setCurrentPage={setCurrentPage}
        itemsPerPage={itemsPerPage}
      />
    </div>
  );
};

export const Template = (args) => {
  const renderData = (data) => {
    return (
      <>
        {data.map((post, index) => {
          return (
            <tr key={index}>
              <td>{post.id}</td>
              <td key={index}>{post.title}</td>
              <td>{post.body}</td>
            </tr>
          );
        })}
      </>
    );
  };
  const [data, setData] = useState([]);
  const [currentPage, setCurrentPage] = useState(1);
  const [itemsPerPage, setItemsPerPage] = useState(5);
  const indexOfLastItem = currentPage * itemsPerPage;
  const indexofFirstItem = indexOfLastItem - itemsPerPage;
  const currentItems = data.slice(indexofFirstItem, indexOfLastItem);
  useEffect(() => {
    fetch('https://jsonplaceholder.typicode.com/posts')
      .then((response) => response.json())
      .then((json) => setData(json));
    return () => {
      setData([]);
    };
  }, []);
  return (
    <div>
      <Table striped bordered hover>
        <thead>
          <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Body</th>
          </tr>
        </thead>
        <tbody>{renderData(currentItems)}</tbody>
      </Table>
      <Paginations
        {...args}
        dataLength={data.length}
        currentPage={currentPage}
        setCurrentPage={setCurrentPage}
        itemsPerPage={itemsPerPage}
      />
    </div>
  );
};

# Paginations

The Pagination component enables the user to select a specific page from a range of pages

## 1. Paginations with API sample

The `<Paginations>` component will include some props which is needed for the pagination to work. Users will be required to provide the **data objects** to be passed in as data length, a **current page** set as initial active, and set the **number of data items** to be rendered per page. Below is a sample of pagination with a table formatted data.

<Canvas>
  <Story name="Standard">{Template.bind({})}</Story>
</Canvas>

<ArgsTable story="Standard" />

```jsx
import { Paginations, Table } from 'sgds-react';
import React, { useState, useEffect } from 'react';

export const Template = (args) => {
  const renderData = (data) => {
    return (
      <>
        {data.map((post, index) => {
          return (
            <tr key={index}>
              <td>{post.id}</td>
              <td key={index}>{post.title}</td>
              <td>{post.body}</td>
            </tr>
          );
        })}
      </>
    );
  };
  const [data, setData] = useState([]);
  const [currentPage, setCurrentPage] = useState(1);
  const [itemsPerPage, setItemsPerPage] = useState(5);
  const indexOfLastItem = currentPage * itemsPerPage;
  const indexofFirstItem = indexOfLastItem - itemsPerPage;
  const currentItems = data.slice(indexofFirstItem, indexOfLastItem);

  // fetch api sample
  useEffect(() => {
    fetch('https://jsonplaceholder.typicode.com/posts')
      .then((response) => response.json())
      .then((json) => setData(json));
    return () => {
      setData([]);
    };
  }, []);

  return (
    <div>
      <Table striped bordered hover>
        <thead>
          <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Body</th>
          </tr>
        </thead>
        <tbody>{renderData(currentItems)}</tbody>
      </Table>
      <Paginations
        {...args}
        dataLength={data.length}
        currentPage={currentPage}
        setCurrentPage={setCurrentPage}
        itemsPerPage={itemsPerPage}
      />
    </div>
  );
};
```

## 2. Alternative Sizes

By default, the size is set at `sm`. Alternatively, you could also specify `md` or ` lg` to alter the sizes.

<Canvas>
  <Story name="Size-sm">{Template2.bind({})}</Story>
  <Story name="Size-md" args={{ size: 'md' }}>
    {Template2.bind({})}
  </Story>
  <Story name="Size-lg" args={{ size: 'lg' }}>
    {Template2.bind({})}
  </Story>
</Canvas>

## 3. Direction Variant

The `directionVariant` string prop allows you to toggle between rendering text and arrow direction for the increment/decrement pages button as shown below. By default, it is set to `icon-text`, but can be also be set to just `text` or `icon`.

<Canvas>
  <Story name="Direction Variant icon-text">{Template2.bind({})}</Story>
  <Story name="Direction Variant text" args={{ directionVariant: 'text' }}>
    {Template2.bind({})}
  </Story>
  <Story name="Direction Variant icon" args={{ directionVariant: 'icon' }}>
    {Template2.bind({})}
  </Story>
</Canvas>

## 4. Setting Limit

The `limit` prop will set the pages limit based on the `data.length` and `itemsPerPage` provided to be rendered in the pagination. By default, it is set to `3`. It should be set using odd numbers as any increment/decrement of pages will set the active page to be in the center of the limit. For example, setting a limit of `3` will show `6,7,8` with `7` as the active page in the middle.

<Canvas>
  <Story name="Limit 3">{Template2.bind({})}</Story>
  <Story name="Limit 5" args={{ limit: 5 }}>
    {Template2.bind({})}
  </Story>
  <Story name="Limit 7" args={{ limit: 7 }}>
    {Template2.bind({})}
  </Story>
</Canvas>

## 5. Ellipsis Mode

The `ellipsisOn` boolean prop allows user to increment/decrement pages based on the `limit` number settings. By default, it's `false` which shows a disabled increment ellipsis button. Setting to `true` will render and allow functionality of both ellipsis direction button.

<Canvas>
  <Story name="Ellipsis Off">{Template2.bind({})}</Story>
  <Story name="Ellipsis On" args={{ ellipsisOn: true }}>
    {Template2.bind({})}
  </Story>
</Canvas>
