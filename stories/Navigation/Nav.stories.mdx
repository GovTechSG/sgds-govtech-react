import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import {
  Nav,
  Button,
  NavItem,
  NavLink,
  Dropdown,
  Container,
  Row,
  Col,
  Navbar,
} from '../../src';
import { useState } from 'react';
import { HIDDEN_COMMON_PROPS } from '../helpers';

<Meta
  title="Components/Navigation/Nav/Nav"
  component={Nav}
  subcomponents={{
    'Nav.Item': Nav.Item,
    'Nav.Link': Nav.Link,
    'Nav.Dropdown': Nav.Dropdown,
  }}
/>

export const DefaultTemplate = (args) => {
  return (
    <Navbar>
      <Nav {...args}>
        <Nav.Item>
          <Nav.Link eventKey="link-1">Link</Nav.Link>
        </Nav.Item>
        <Nav.Dropdown eventKey="4" title="Dropdown" href="#">
          <Nav.Dropdown.Item eventKey="4.1">Action</Nav.Dropdown.Item>
          <Nav.Dropdown.Item eventKey="4.2">Another action</Nav.Dropdown.Item>
          <Nav.Dropdown.Item eventKey="4.3">
            Something else here
          </Nav.Dropdown.Item>
          <Nav.Dropdown.Divider />
          <Nav.Dropdown.Item eventKey="4.4">Separated link</Nav.Dropdown.Item>
        </Nav.Dropdown>
        <Nav.Dropdown eventKey="5" isMegaMenu title="Megamenu" href="#">
          <div className="container is-fluid">
            <div className="row p-4">
              <div className="col">
                <p>
                  <strong>
                    Co-create innovative digital solutions with the Government
                  </strong>
                </p>
                <p>
                  Discover events, blogs, open-source technologies and other
                  collaboration opportunities
                </p>
              </div>
              <div className="col">
                <a className="dropdown-item" href="#">
                  Features
                </a>
                <a className="dropdown-item" href="#">
                  Features
                </a>
                <a className="dropdown-item" href="#">
                  Features
                </a>
              </div>
              <div className="col">
                <a className="dropdown-item" href="#">
                  Features
                </a>
                <a className="dropdown-item" href="#">
                  Features
                </a>
                <a className="dropdown-item" href="#">
                  Features
                </a>
              </div>
              <div className="col">
                <a className="dropdown-item" href="#">
                  Features
                </a>
                <a className="dropdown-item" href="#">
                  Features
                </a>
                <a className="dropdown-item" href="#">
                  Features
                </a>
              </div>
            </div>
          </div>
        </Nav.Dropdown>
      </Nav>
    </Navbar>
  );
};
export const ActiveKeyTemplate = () => {
  const [activeK, setActiveK] = React.useState('4');
  const [activeDropdownLink, setActiveDropdownLink] = React.useState('4.1');
  const handleClickDropdown = (ek, linkKey) => {
    setActiveK(ek);
    if (linkKey) setActiveDropdownLink(linkKey);
  };
  const handleLinkClick = (ek) => {
    setActiveK(ek);
    setActiveDropdownLink('');
  };
  return (
    <Navbar>
      <Nav activeKey={activeK}>
        <Nav.Item>
          <Nav.Link onClick={() => handleLinkClick('link-1')} eventKey="link-1">
            Link
          </Nav.Link>
        </Nav.Item>
        <Nav.Dropdown
          eventKey="4"
          title="Dropdown"
          id="nav-dropdown"
          onClick={() => handleClickDropdown('4')}
        >
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.1')}
            eventKey="4.1"
            active={activeDropdownLink === '4.1'}
          >
            Action
          </Nav.Dropdown.Item>
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.2')}
            eventKey="4.2"
            active={activeDropdownLink === '4.2'}
          >
            Another action
          </Nav.Dropdown.Item>
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.3')}
            eventKey="4.3"
            active={activeDropdownLink === '4.3'}
          >
            Something else here
          </Nav.Dropdown.Item>
          <Nav.Dropdown.Divider />
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.4')}
            eventKey="4.4"
            active={activeDropdownLink === '4.4'}
          >
            Separated link
          </Nav.Dropdown.Item>
        </Nav.Dropdown>
        <Nav.Dropdown
          eventKey="5"
          isMegaMenu
          title="Megamenu"
          id="nav-mega"
          onClick={() => handleClickDropdown('5')}
        >
          <Container>
            <Row>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.1')}
                  eventKey="5.1"
                  active={activeDropdownLink === '5.1'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5,2')}
                  eventKey="5.2"
                  active={activeDropdownLink === '5.2'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.3')}
                  eventKey="5.3"
                  active={activeDropdownLink === '5.3'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
            </Row>
            <Row>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.4')}
                  eventKey="5.4"
                  active={activeDropdownLink === '5.4'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.5')}
                  eventKey="5.5"
                  active={activeDropdownLink === '5.5'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.6')}
                  eventKey="5.6"
                  active={activeDropdownLink === '5.6'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
            </Row>
          </Container>
        </Nav.Dropdown>
      </Nav>
    </Navbar>
  );
};

# Nav

`<Nav/>` is built on top of `@restart/ui` `Nav` component.

In Nav, there are three kinds of children :

1. Link : `<Nav.Item>`, `<Nav.Link/>`
2. Hoverable Dropdown : `<Nav.Dropdown>` , `<Nav.Dropdown.Item />` , `<Nav.Dropdown.Divider/>`, `<Nav.Dropdown.ItemText/>`
3. Hoverable Dropdown - megamenu : `<Nav.Dropdown>` , `<Nav.Dropdown.Item />` , `<Nav.Dropdown.Divider/>`, `<Nav.Dropdown.ItemText/>`

**NOTE** `Navbar` component is used in all examples here just to apply SGDS stylings

See example of all three types below;

<Canvas>
  <Story height="300px" name="Default">
    {DefaultTemplate.bind({})}
  </Story>
</Canvas>

## API

```jsx
import { Nav } from '@govtechsg/sgds-react/Nav';
```

<ArgsTable story="Default" />

Reference API for [NavItem](https://react-bootstrap.github.io/components/navs/#nav-item-props) ,
[NavLink](https://react-bootstrap.github.io/components/navs/#nav-link-props)
and
[NavDropdown](/docs/components-navigation-nav-navdropdown--default-story)

```jsx
import {
  Navbar,
  Nav,
  Col,
  Row,
  Container,
} from '@govtechsg/sgds-react';

<Navbar>
  <Nav>
    <Nav.Item>
      <Nav.Link eventKey="link-1">Link</Nav.Link>
    </Nav.Item>
    <Nav.Dropdown eventKey="4" title="Dropdown" id="nav-dropdown">
      <Nav.Dropdown.Item eventKey="4.1">Action</Nav.Dropdown.Item>
      <Nav.Dropdown.Item eventKey="4.2">Another action</Nav.Dropdown.Item>
      <Nav.Dropdown.Item eventKey="4.3">Something else here</Nav.Dropdown.Item>
      <Nav.Dropdown.Divider />
      <Nav.Dropdown.Item eventKey="4.4">Separated link</Nav.Dropdown.Item>
    </Nav.Dropdown>
    <Nav.Dropdown eventKey="5" isMegaMenu title="Megamenu" id="nav-mega">
      <Container>
        <Row>
          <Col>
            <Nav.Dropdown.Item eventKey="5.1">Action</Nav.Dropdown.Item>
          </Col>
          <Col>
            <Nav.Dropdown.Item eventKey="5.2">Action</Nav.Dropdown.Item>
          </Col>
          <Col>
            <Nav.Dropdown.Item eventKey="5.3">Action</Nav.Dropdown.Item>
          </Col>
        </Row>
        <Row>
          <Col>
            <Nav.Dropdown.Item eventKey="5.4">Action</Nav.Dropdown.Item>
          </Col>
          <Col>
            <Nav.Dropdown.Item eventKey="5.5">Action</Nav.Dropdown.Item>
          </Col>
          <Col>
            <Nav.Dropdown.Item eventKey="5.6">Action</Nav.Dropdown.Item>
          </Col>
        </Row>
      </Container>
    </Nav.Dropdown>
  </Nav>
</Navbar>;
```

## On first load

Usually on first load, the navigated item should appear active to the users.

Use `defaultActiveKey` prop to set the activeKey on initial load

<Canvas>
  <Story
    height="250px"
    name="Default Active Key"
    args={{ defaultActiveKey: 'link-1' }}
  >
    {DefaultTemplate.bind({})}
  </Story>
</Canvas>

## Manage activeKey state

To manage activeKey , label `eventKey` on `Nav.Link`, `Nav.Dropdown` and `Nav.DropdownItem` and use useState hook with onClick handler to set the activeKey.
The activeKey prop adds a .active css selector to the current active Item.

Under `NavDropdown` each `Nav.Dropdown.Item` accepts an `active`. Make use of useState hook and `active` prop to orchestrate the active items in the context of the whole Nav

Toggle with the demo below and see code example below

<Canvas>
  <Story height="250px" name="Active Key">
    {ActiveKeyTemplate.bind({})}
  </Story>
</Canvas>

```jsx
import {
  Navbar,
  Nav,
  Container,
  Row,
  Col,
} from '@govtechsg/sgds-react';

const ActiveKeyTemplate = () => {
  const [activeK, setActiveK] = React.useState('4');
  const [activeDropdownLink, setActiveDropdownLink] = React.useState('4.1');
  const handleClickDropdown = (ek, linkKey) => {
    setActiveK(ek);
    if (linkKey) setActiveDropdownLink(linkKey);
  };
  const handleLinkClick = (ek) => {
    setActiveK(ek);
    setActiveDropdownLink('');
  };
  return (
    <Navbar>
      <Nav activeKey={activeK}>
        <Nav.Item>
          <Nav.Link onClick={() => handleLinkClick('link-1')} eventKey="link-1">
            Link
          </Nav.Link>
        </Nav.Item>
        <Nav.Dropdown
          eventKey="4"
          title="Dropdown"
          id="nav-dropdown"
          onClick={() => handleClickDropdown('4')}
        >
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.1')}
            eventKey="4.1"
            active={activeDropdownLink === '4.1'}
          >
            Action
          </Nav.Dropdown.Item>
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.2')}
            eventKey="4.2"
            active={activeDropdownLink === '4.2'}
          >
            Another action
          </Nav.Dropdown.Item>
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.3')}
            eventKey="4.3"
            active={activeDropdownLink === '4.3'}
          >
            Something else here
          </Nav.Dropdown.Item>
          <Nav.Dropdown.Divider />
          <Nav.Dropdown.Item
            onClick={() => handleClickDropdown('4', '4.4')}
            eventKey="4.4"
            active={activeDropdownLink === '4.4'}
          >
            Separated link
          </Nav.Dropdown.Item>
        </Nav.Dropdown>
        <Nav.Dropdown
          eventKey="5"
          isMegaMenu
          title="Megamenu"
          id="nav-mega"
          onClick={() => handleClickDropdown('5')}
        >
          <Container>
            <Row>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.1')}
                  eventKey="5.1"
                  active={activeDropdownLink === '5.1'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5,2')}
                  eventKey="5.2"
                  active={activeDropdownLink === '5.2'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.3')}
                  eventKey="5.3"
                  active={activeDropdownLink === '5.3'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
            </Row>
            <Row>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.4')}
                  eventKey="5.4"
                  active={activeDropdownLink === '5.4'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.5')}
                  eventKey="5.5"
                  active={activeDropdownLink === '5.5'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
              <Col>
                <Nav.Dropdown.Item
                  onClick={() => handleClickDropdown('5', '5.6')}
                  eventKey="5.6"
                  active={activeDropdownLink === '5.6'}
                >
                  Action
                </Nav.Dropdown.Item>
              </Col>
            </Row>
          </Container>
        </Nav.Dropdown>
      </Nav>
    </Navbar>
  );
};
```
