import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';

import { Form, Button } from '../../src/components/index';

<Meta
  title="MDX/Form"
  component={Form}
  argTypes={{
    validated: {
      description:
        'Mark a form as having been validated. Setting it to `true` will toggle any validation styles on the forms elements.',
      table: {
        category: '<Form>',
        type: { summary: 'boolean' },
        disable: true,
      }, // not needed, enabling this will clash icon with default searchIcon
    },
    as: { table: { disable: true } },
  }}
/>

# Forms

Examples and usage guidelines for form control styles, layout options, and custom components for creating a wide variety of forms.

The `<Form.Control>` component renders a form control with Bootstrap styling. The `<Form.Group>` component wraps a form control with proper spacing,
along with support for a label, help text, and validation state. To ensure accessibility, set controlId on `<FormGroup>`, and use `<FormLabel>` for the label.

As our components are built on top of `React-Bootstrap` library, do check out the detailed `Form` API references <a href="https://react-bootstrap.github.io/forms/overview/" target="_blank">here</a>.

## 1. Basic Form

export const Template = (args) => {
  const onSubmit = (event) => {
    event.preventDefault();
    console.log('submission prevented');
  };
  return (
    <Form onSubmit={onSubmit}>
      <Form.Group className="mb-3" controlId="formBasicEmail">
        <Form.Label>Email address</Form.Label>
        <Form.Text className="text-muted">
          We'll never share your email with anyone else.
        </Form.Text>
        <Form.Control htmlSize={5} type="email" placeholder="Enter email" />
      </Form.Group>
      <Form.Group className="mb-3" controlId="formBasicPassword">
        <Form.Label>Password</Form.Label>
        <Form.Text className="text-muted">
          Password has to be a combination of alphanumeric.
        </Form.Text>
        <Form.Control type="password" placeholder="Password" />
      </Form.Group>
      <Form.Group className="mb-3" controlId="formBasicCheckbox">
        <Form.Check type="checkbox" label="Check me out" />
      </Form.Group>
      <Button variant="primary" type="submit">
        Submit
      </Button>
    </Form>
  );
};

<Canvas>
  <Story name="Basic">{Template.bind({})}</Story>
</Canvas>

```jsx
import { Form, Button } from 'sgds-govtech-react';

<Form onSubmit={onSubmit}>
  <Form.Group className="mb-3" controlId="formBasicEmail">
    <Form.Label>Email address</Form.Label>
    <Form.Control htmlSize={5} type="email" placeholder="Enter email" />
    <Form.Text className="text-muted">
      We'll never share your email with anyone else.
    </Form.Text>
  </Form.Group>
  <Form.Group className="mb-3" controlId="formBasicPassword">
    <Form.Label>Password</Form.Label>
    <Form.Control type="password" placeholder="Password" />
  </Form.Group>
  <Form.Group className="mb-3" controlId="formBasicCheckbox">
    <Form.Check type="checkbox" label="Check me out" />
  </Form.Group>
  <Button variant="primary" type="submit">
    Submit
  </Button>
</Form>;
```

## 2. Disabled forms

Add the `disabled` boolean attribute on an input to prevent user interactions and make it appear lighter.

<Canvas>
  <Story name="Disabled Inputs">
    <>
      <Form.Group className="mb-3">
        <Form.Label>Disabled input</Form.Label>
        <Form.Control placeholder="Disabled input" disabled />
      </Form.Group>
      <Form.Group className="mb-3">
        <Form.Label>Disabled select menu</Form.Label>
        <Form.Select disabled>
          <option>Disabled select</option>
        </Form.Select>
      </Form.Group>
      <Form.Group className="mb-3">
        <Form.Check type="checkbox" label="Can't check this" disabled />
      </Form.Group>
    </>
  </Story>
</Canvas>

Browsers treat all native form controls (`<input>`, `<select>` and `<button>` elements) inside `<fieldset disabled>` as disabled, preventing both keyboard and mouse interactions on them.

However, if your form also includes custom button-like elements such as `<a ... class="btn btn-*">`, these will only be given a style of `pointer-events: none`,
meaning they are still focusable and operable using the keyboard. In this case, you must manually modify these controls by adding `tabindex="-1"` to prevent them
from receiving focus and `aria-disabled="disabled"` to signal their state to assistive technologies.

```jsx
import { Form, Button } from 'sgds-govtech-react';

<Canvas>
  <Story name="Disabled fieldset">
    <Form>
      <fieldset disabled>
        <Form.Group className="mb-3">
          <Form.Label htmlFor="disabledTextInput">Disabled input</Form.Label>
          <Form.Control id="disabledTextInput" placeholder="Disabled input" />
        </Form.Group>
        <Form.Group className="mb-3">
          <Form.Label htmlFor="disabledSelect">Disabled select menu</Form.Label>
          <Form.Select id="disabledSelect">
            <option>Disabled select</option>
          </Form.Select>
        </Form.Group>
        <Form.Group className="mb-3">
          <Form.Check
            type="checkbox"
            id="disabledFieldsetCheck"
            label="Can't check this"
          />
        </Form.Group>
        <Button type="submit">Submit</Button>
      </fieldset>
    </Form>
  </Story>
</Canvas>;
```

## 3. Form Text

Block-level help text in forms can be created using `<Form.Text>`. Inline help text can be flexibly implemented using any inline HTML element and utility classes like .text-muted.

### **Associating help text with form controls**

Help text should be explicitly associated with the form control it relates to using the `aria-describedby` attribute. This will ensure that assistive technologies—such as screen readers—will announce this help text when the user focuses or enters the control.
Form text below inputs can be styled with `<Form.Text>`. This component includes `display: block` and adds some top margin for easy spacing from the inputs above.

export const Template_Form_Text = (args) => {
  return (
    <>
      <Form.Label htmlFor="inputPassword5">Password</Form.Label>
      <Form.Text {...args} id="passwordHelpBlock" muted>
        Your password must be 8-20 characters long, contain letters and numbers,
        and must not contain spaces, special characters, or emoji.
      </Form.Text>
      <Form.Control
        type="password"
        id="inputPassword5"
        aria-describedby="passwordHelpBlock"
      />
    </>
  );
};

<Canvas>
  <Story name="Form Text">{Template_Form_Text.bind({})}</Story>
</Canvas>

```jsx
<>
  <Form.Label htmlFor="inputPassword5">Password</Form.Label>
  <Form.Text id="passwordHelpBlock" muted>
    Your password must be 8-20 characters long, contain letters and numbers, and
    must not contain spaces, special characters, or emoji.
  </Form.Text>
  <Form.Control
    type="password"
    id="inputPassword5"
    aria-describedby="passwordHelpBlock"
  />
</>
```

## 4. Form Select

Customize the native `<select>`s with custom CSS that changes the element’s initial appearance.

export const Template_Form_Select = () => {
  return (
    <Form.Select aria-label="Default select example">
      <option>Open this select menu</option>
      <option value="1">One</option>
      <option value="2">Two</option>
      <option value="3">Three</option>
    </Form.Select>
  );
};

<Canvas>
  <Story name="Form Select">{Template_Form_Select.bind({})}</Story>
</Canvas>

```jsx
<Form.Select aria-label="Default select example">
  <option>Open this select menu</option>
  <option value="1">One</option>
  <option value="2">Two</option>
  <option value="3">Three</option>
</Form.Select>
```

## 5. Form Select Sizing

You may also choose from small and large custom selects to match our similarly sized text inputs.

<Canvas>
  <Story name="Sizing">
    <>
      <Form.Select size="lg">
        <option>Large select</option>
      </Form.Select>
      <br />
      <Form.Select>
        <option>Default select</option>
      </Form.Select>
      <br />
      <Form.Select size="sm">
        <option>Small select</option>
      </Form.Select>
    </>
  </Story>
</Canvas>

```jsx
<>
  <Form.Select size="lg">
    <option>Large select</option>
  </Form.Select>

  <Form.Select>
    <option>Default select</option>
  </Form.Select>

  <Form.Select size="sm">
    <option>Small select</option>
  </Form.Select>
</>
```
