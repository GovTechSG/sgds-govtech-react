import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { Button } from '../../src/components/index';
import { useState, useEffect } from 'react';
import { HIDDEN_COMMON_PROPS } from '../helpers';

<Meta
  title="MDX/Button"
  component={Button}
  argTypes={{
    ...HIDDEN_COMMON_PROPS,
    as: { table: { disable: true } },
  }}
/>

# Buttons

Custom button styles for actions in forms, dialogs, and more with support for multiple sizes, states, and more.

export const defaultTemplate = (args) => <Button {...args}>Default</Button>;

<Canvas>
  <Story name="Default">{defaultTemplate.bind({})}</Story>
</Canvas>

<ArgsTable story="Default" />

## 1. Examples

Use any of the available button style types to quickly create a styled button. Just modify the `variant` prop.

<Canvas>
  <Story name="Basic">
    {[
      'primary',
      'secondary',
      'success',
      'danger',
      'warning',
      'info',
      'light',
      'dark',
    ].map((variant, idx) => (
      <Button className="m-1" key={idx} variant={variant}>
        {variant}
      </Button>
    ))}
    ;
  </Story>
</Canvas>

```jsx
// Example

import { Button } from 'sgds-react';

<Button variant="primary">Primary<Button>
```

## 2. Outline buttons

For a lighter touch, Buttons also come in `outline-*` variants with no background color.

<Canvas withSource="open">
  <Story name="Outline buttons">
    <>
      <Button variant="outline-primary">Primary</Button>{' '}
      <Button variant="outline-secondary">Secondary</Button>{' '}
      <Button variant="outline-success">Success</Button>{' '}
      <Button variant="outline-warning">Warning</Button>{' '}
      <Button variant="outline-danger">Danger</Button>{' '}
      <Button variant="outline-info">Info</Button>{' '}
      <Button variant="outline-light">Light</Button>{' '}
      <Button variant="outline-dark">Dark</Button>
    </>
    ;
  </Story>
</Canvas>

```jsx
import { Button } from 'sgds-react';

<Button variant="outline-primary">Primary<Button>
```

## 3. Button tags

Normally `<Button>` components will render a HTML `<button>` element. However you can render whatever you'd like, adding a href prop will automatically render an `<a/>` element.
You can use the as prop to render whatever your heart desires. Sgds-React will take care of the proper ARIA roles for you.

<Canvas withSource="open">
  <Story name="Button tags">
    <>
      <Button href="#">Link</Button> <Button type="submit">Button</Button>{' '}
      <Button as="input" type="button" value="Input" />{' '}
      <Button as="input" type="submit" value="Submit" />{' '}
      <Button as="input" type="reset" value="Reset" />
    </>
  </Story>
</Canvas>

## 4. Sizes

Fancy larger or smaller buttons? Add `size="lg"`, `size="sm"` for additional sizes.

<Canvas withSource="open">
  <Story name="Button sizes">
    <>
      <div className="mb-2">
        <Button variant="primary" size="lg">
          Large button
        </Button>{' '}
        <Button variant="secondary" size="lg">
          Large button
        </Button>
      </div>
      <div>
        <Button variant="primary" size="sm">
          Small button
        </Button>{' '}
        <Button variant="secondary" size="sm">
          Small button
        </Button>
      </div>
    </>
  </Story>
</Canvas>

## 5. Block buttons

Create responsive stacks of full-width, “block buttons” with a mix of our display and gap utilities.

<Canvas withSource="open">
  <Story name="Block buttons">
    <div className="d-grid gap-2">
      <Button variant="primary" size="lg">
        Block level button
      </Button>
      <Button variant="secondary" size="lg">
        Block level button
      </Button>
    </div>
  </Story>
</Canvas>

## 6. Active state

To set a button's active state simply set the component's `active` prop.

<Canvas withSource="open">
  <Story name="Active state">
    <>
      <Button variant="primary" active>
        Primary button
      </Button>{' '}
      <Button variant="secondary" active>
        Button
      </Button>
    </>
  </Story>
</Canvas>

## 7. Disabled state

Make buttons look inactive by adding the `disabled` prop to.

<Canvas withSource="open">
  <Story name="Disabled state">
    <>
      <Button variant="primary" disabled>
        Primary button
      </Button>{' '}
      <Button variant="secondary" disabled>
        Button
      </Button>{' '}
      <Button href="#" variant="secondary" disabled>
        Link
      </Button>
    </>
  </Story>
</Canvas>

Watch out! `<a>` elements don't naturally support a disabled attribute. In browsers that support it this is handled with a point-events: none style but not all browsers support it yet.

Sgds-React will prevent any `onClick` handlers from firing regardless of the rendered element.

## 8. Button loading state

When activating an asynchronous action from a button it is a good UX pattern to give the user feedback as to the loading state, this can easily be done by updating your `<Button />`s props from a state change like below.

export const Template = (args) => {
  function simulateNetworkRequest() {
    return new Promise((resolve) => setTimeout(resolve, 2000));
  }
  const [isLoading, setLoading] = useState(false);
  useEffect(() => {
    if (isLoading) {
      simulateNetworkRequest().then(() => {
        setLoading(false);
      });
    }
  }, [isLoading]);
  const handleClick = () => setLoading(true);
  return (
    <Button
      variant="primary"
      disabled={isLoading}
      onClick={!isLoading ? handleClick : null}
    >
      {isLoading ? 'Loading…' : 'Click to load'}
    </Button>
  );
};

<Canvas>
  <Story name="Button loading state">{Template.bind({})}</Story>
</Canvas>

```jsx
function simulateNetworkRequest() {
  return new Promise((resolve) => setTimeout(resolve, 2000));
}

function LoadingButton() {
  const [isLoading, setLoading] = useState(false);

  useEffect(() => {
    if (isLoading) {
      simulateNetworkRequest().then(() => {
        setLoading(false);
      });
    }
  }, [isLoading]);

  const handleClick = () => setLoading(true);

  return (
    <Button
      variant="primary"
      disabled={isLoading}
      onClick={!isLoading ? handleClick : null}
    >
      {isLoading ? 'Loading…' : 'Click to load'}
    </Button>
  );
}

render(<LoadingButton />);
```

## 9. Add icon as a child component

Add icon to `Button` as a children component

export const iconTemplate = (args) => (
  <Button {...args}>
    <i className="bi bi-arrow-90deg-left"></i> Button with icon
  </Button>
);

<Canvas>
  <Story name="Button with icon">{iconTemplate.bind({})}</Story>
</Canvas>
