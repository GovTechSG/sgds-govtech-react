import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { HIDDEN_COMMON_PROPS, VARIANT } from '../helpers';
import {
  Card,
  Button,
  CardGroup,
  Row,
  Col,
  Form,
  InputGroup,
  FormControl,
  CloseButton,
} from '../../src/components/index';
import ActionCard from '../../src/components/Card/ActionCard';
import { useState } from 'react';

<Meta
  title="MDX/Action Card"
  component={ActionCard}
  argTypes={{
    ...HIDDEN_COMMON_PROPS,
  }}
/>

export const Template = (args) => {
  const [brand, setBrand] = useState('');
  const [showBasket, setShowBasket] = useState(false);
  const handleChange = (e) => {
    setBrand(e.target.value);
  };
  const [count, setCount] = useState(1);
  const onPlus = () => {
    setCount(count + 1);
  };
  const onMinus = () => {
    if (count < 1) setCount(0);
    else setCount(count - 1);
  };
  const [disappear, setDisappear] = useState(false);
  const handleDismiss = () => {
    //do side effects to handleDimiss
    setBrand('');
  };
  return (
    <Row>
      <Col xs lg="4">
        <Form>
          <ActionCard
            name="test"
            type="radio"
            value="apple"
            checked={brand === 'apple'}
            onChange={handleChange}
            {...args}
          >
            <Card.Body>
              <Card.Title as="h4">
                Apple <i className="bi bi-apple"></i>
              </Card.Title>
              <Card.Text>Macbook Pro M1</Card.Text>
            </Card.Body>
          </ActionCard>
          <ActionCard
            name="test"
            type="radio"
            value="microsoft"
            checked={brand === 'microsoft'}
            onChange={handleChange}
          >
            <Card.Body>
              <Card.Title as="h4">
                Microsoft <i className="bi bi-microsoft"></i>
              </Card.Title>
              <Card.Text>Microsoft Surface Pro</Card.Text>
            </Card.Body>
          </ActionCard>
          <ActionCard
            name="test"
            type="radio"
            value="acer"
            checked={brand === 'acer'}
            onChange={handleChange}
          >
            <Card.Body>
              <Card.Title as="h4">
                Acer <i className="bi bi-laptop"></i>
              </Card.Title>
              <Card.Text>Acer Aspire 5</Card.Text>
            </Card.Body>
          </ActionCard>
        </Form>
      </Col>
      <Col xs lg="4">
        {brand && (
          <Card dismissible={true} dismiss={handleDismiss}>
            <Card.Body>
              <Card.Title as="h4">
                Basket <i className="bi bi-cart"></i>
              </Card.Title>
              <Row>
                <Col>
                  <Card.Text>Item Brand: </Card.Text>
                  <Card.Text>Qty: </Card.Text>
                </Col>
                <Col>
                  <Card.Text>{brand ? brand : '-'}</Card.Text>
                  <InputGroup size="sm">
                    <Button onClick={onMinus}>-</Button>
                    <FormControl
                      type="number"
                      aria-label="quantity-form-with-toggle"
                      aria-describedby="basic-addon1"
                      min="1"
                      step="1"
                      value={count}
                      onChange={(e) => {
                        setCount(parseInt(e.target.value));
                      }}
                    />
                    <Button onClick={onPlus}>+</Button>
                  </InputGroup>
                </Col>
              </Row>
            </Card.Body>
          </Card>
        )}
      </Col>
    </Row>
  );
};

<Canvas>
  <Story name="Input Card">{Template.bind({})}</Story>
</Canvas>
